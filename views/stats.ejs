<%- include('partials/header') %>

<div class="container my-4">
  <h2 class="text-center mb-4">ğŸ“Š Player Statistics</h2>
  <div class="d-flex justify-content-center mb-3">
    <a href="/" class="btn btn-primary">ğŸ  Back to Home</a>
  </div>

  <div class="row justify-content-center mb-4">
    <div class="col-md-4 mb-3">
      <div class="card bg-dark text-white shadow-sm">
        <div class="card-header text-center fw-bold">ğŸ¥‡ Top Goal Scorers</div>
        <ul class="list-group list-group-flush">
          <% topGoals.forEach((p, idx) => { %>
          <li class="list-group-item d-flex justify-content-between">
            <span>âš½<%= p.firstName %> <%= p.lastName %></span>
            <span><%= p.goals %> </span>
          </li>
          <% }) %>
        </ul>
      </div>
    </div>
  
    <div class="col-md-4 mb-3">
      <div class="card bg-dark text-white shadow-sm">
        <div class="card-header text-center fw-bold">ğŸ¯ Top Assisters</div>
        <ul class="list-group list-group-flush">
          <% topAssists.forEach((p, idx) => { %>
          <li class="list-group-item d-flex justify-content-between">
            <span>ğŸ…°ï¸<%= p.firstName %> <%= p.lastName %></span>
            <span><%= p.assists %></span>
          </li>
          <% }) %>
        </ul>
      </div>
    </div>
  </div>
  

    <!-- Combined Man of the Match -->
    <% if (combinedMotm && combinedMotm.length > 0) { %>
    <div class="card mb-4">
      <div class="card-header text-center fw-bold bg-success text-white">
        ğŸ† Combined Man of the Match Leaders
      </div>
      <ul class="list-group list-group-flush">
        <% combinedMotm.forEach((p, i) => { %>
        <li class="list-group-item d-flex justify-content-between">
          <span><%= i + 1 %>. <%= p.firstName %> <%= p.lastName %></span>
          <span>ğŸ… <%= p.totalMotm %> awards</span>
        </li>
        <% }) %>
      </ul>
    </div>
    <% } %>

    <!-- Full Stats Leaderboard -->
    <div class="table-responsive">
      <table
        class="table table-dark table-striped table-bordered text-center align-middle"
      >
        <thead>
          <tr>
            <th>Name</th>
            <th>âš½</th>
            <th>ğŸ…°ï¸</th>
            <th>ğŸŸ¨</th>
            <th>ğŸŸ¥</th>
            <th>OMğŸ–ï¸</th>
            <th>PğŸ…</th>
          </tr>
        </thead>
        <tbody>
          <% allPlayers.forEach(p => { %>
          <tr>
            <td><%= p.firstName %> <%= p.lastName %></td>
            <td><%= p.goals %></td>
            <td><%= p.assists %></td>
            <td><%= p.yellowCards %></td>
            <td><%= p.redCards %></td>
            <td><%= p.motmOpposition || 0 %></td> 
            <td><%= p.parentMotmWins || 0 %></td>
          </tr>
          <% }) %>
        </tbody>
        
      </table>
    </div>
  </div>

  <%- include('partials/footer') %>
</div>
