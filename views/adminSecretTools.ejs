<%- include('partials/header') %>

<div class="container mt-5 text-center">
  <h2 class="mb-4">🛠 Secret Admin Tools</h2>

  <div class="d-grid gap-3" style="max-width: 400px; margin: 0 auto">
    <a href="/leaderboard" class="btn btn-primary">🏆 View Vote Leaderboard</a>
    <div class="card my-4 shadow">
      <div class="card-header bg-dark text-white fw-bold text-center">
        🗳️ Vote Breakdown
      </div>
      <div class="table-responsive">
        <table class="table table-striped table-bordered text-center">
          <thead class="table-dark">
            <tr>
              <th>Parent Name</th>
              <th>Linked Player</th>
              <th>Voted For</th>
            </tr>
          </thead>
          <tbody>
            <% voters.forEach(parent => { %>
            <tr>
              <td><%= parent.firstName %> <%= parent.lastName %></td>
              <td>
                <%= parent.linkedPlayer?.firstName %> <%=
                parent.linkedPlayer?.lastName %>
              </td>
              <td>
                <% if (parent.votedFor) { %> <%= parent.votedFor.firstName %>
                <%= parent.votedFor.lastName %> <% } else { %> ❌ Not Recorded
                <% } %>
              </td>
            </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </div>

    <a href="/admin/stats-edit" class="btn btn-warning">✏️ Edit Player Stats</a>
    <a href="/admin/reset-stats" class="btn btn-danger"
      >♻️ Reset Player Stats</a
    >
    <a href="/" class="btn btn-secondary">⬅️ Back to Dashboard</a>
  </div>
</div>

<%- include('partials/footer') %>
